---
title: 背包问题
toc: true
date: 2018-04-04 16:20:54
tags:
categories: 笔试

---

# 0-1背包

## 题目

有N件物品和一个容量为V的背包。第i件物品的费用是c[i]，价值是w[i]。求解将哪些物品装入背包可使价值总和最大。

## 基本思路

子问题：即 ```f[i][v]```表示前i件物品放入容量为v的背包中，可以获得的最大价值，状态转移方程为：

```java
f[i][v] = max{f[i-1][v], f[i-1][v-c[i]] + w[i]}
```

## 优化空间复杂度

以上方法时间复杂度为O(VN)，空间复杂度也是O(VN)，需要维护一个二维数组，但是在利用状态方程求解时，第i行的值只利用了前一行的值。因此可以将二维数组优化为一维数组。

我们在每次主循环中，以```v=V..0```的顺序来计算```f[v]```，这样就能保证计算```f[v]```时，```f[v-c[i]]```保存的是状态是```i-1```的状态。

```java
for (int i = 0; i < N; i++) {
    for (int v = V; v >= 0; v--) {
        f[v] = max{f[v], f[v - c[i]] + w[i]}
    }
}
```

另外，在内循环中，显然第i件物品不会影响```v = 0..c[i]```的状态，所以内循环就可以修改为```for (int v = V; v >= c[i]; v--)```。

## 初始化

- 恰好装满背包：除了```f[0]```为0，其他```f[1..V]```均为负无穷，这样就能保证```f[v]```不是正好装下第i件物品时，就仍然是负无穷
- 没有要求装满背包：初始化```f[0..V]```为0

## 常数优化

